# Telegram-бот для Сервисного Центра

Этот Telegram-бот предназначен для взаимодействия с клиентами сервисного центра по ремонту компьютеров и предоставлению IT-услуг. Он помогает пользователям проводить экспресс-диагностику своих устройств, получать за это бонусы, просматривать услуги и связываться с компанией. Также в боте реализована система для менеджеров по списанию бонусов клиентов.

## Функционал

### Для клиентов:
- **Экспресс-тест:** Пользователи могут пройти тест из 8 вопросов, чтобы выявить потенциальные проблемы с их компьютером.
- **Система бонусов:** За прохождение теста начисляются бонусные баллы, которые можно использовать для оплаты услуг.
- **Личный кабинет:** Пользователи могут просматривать свой баланс бонусных баллов и срок их действия.
- **Каталог услуг:** Бот предоставляет информацию о следующих услугах:
    - Ремонт ПК и ноутбуков
    - IT-обслуживание организаций
    - Монтаж видеонаблюдения
- **Связь с компанией:** Пользователи могут запросить обратный звонок или получить контактную информацию.
- **Использование баллов:** Клиенты могут сгенерировать уникальный код для списания баллов, который затем показывают менеджеру.

### Для менеджеров:
- **Списание баллов:** Менеджеры могут инициировать процесс списания баллов клиента, введя его уникальный код и сумму заказа.
- **Подтверждение операции:** Клиент получает уведомление для подтверждения или отмены списания баллов.
- **Уведомления:** Менеджеры и администраторы получают уведомления о статусе операций по списанию баллов.

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/crosspostly/adminko.git
    cd adminko
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Настройте переменные окружения:**
    Создайте файл `.env` в корневой директории проекта и добавьте в него ваш токен Telegram-бота:
    ```
    TELEGRAM_BOT_TOKEN="ВАШ_ТЕЛЕГРАМ_ТОКЕН"
    ```
    Также необходимо указать `ADMIN_NOTIFICATION_CHAT_ID` в файле `config.py` - это ID чата, куда будут приходить уведомления для администратора.

5.  **Запустите бота:**
    ```bash
    ./start_bot.sh
    ```

## Конфигурация

Основная конфигурация бота находится в файле `config.py`. В нем вы можете изменить:
- `USERS_DB_PATH` и `CODES_DB_PATH`: Пути к файлам, используемым в качестве базы данных.
- `TEST_QUESTIONS`: Список вопросов для экспресс-теста.
- `ADMIN_NOTIFICATION_CHAT_ID`: ID чата для отправки уведомлений администратору.
- `MANAGER_IDS`: Список ID пользователей, которые имеют права менеджера.

## Структура проекта

- `bot.py`: Основной файл для запуска бота, содержит инициализацию и регистрацию обработчиков.
- `handlers.py`: Обработчики команд и сообщений от клиентов.
- `admin_handlers.py`: Обработчики команд, доступных только для менеджеров.
- `config.py`: Файл с настройками и конфигурацией бота.
- `data_manager.py`: Функции для работы с данными (сохранение и загрузка из JSON-файлов).
- `utils.py`: Вспомогательные функции (генерация кодов, форматирование даты).
- `requirements.txt`: Список зависимостей Python.
- `start_bot.sh`: Скрипт для запуска бота.
- `memory/`: Директория для хранения JSON-файлов с данными.
- `venv/`: Директория с виртуальным окружением.
